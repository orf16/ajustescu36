@model List<SG_SST.EntidadesDominio.Ausentismo.EDAlertaAusentismo>

<div style="background-color:rgba(253, 245, 154, 0.78); text-align:center; ">
    La siguiente tabla muestra alertas sobre casos que se encuentren en rango de 60 a 120 dias de ausentismo (<text style="color:gold">color amarillo</text>) y una segunda alerta para casos que superen los 120 dias de ausentismo (<text style="color:red">color rojo</text>)
</div>
<p>
    <table class="table table-bordered" style="border: 2px solid lightslategray">
        <tr class="titulos_tabla">
            <th style="border-right: 2px solid lightslategray; text-align:center">
                Documento Persona
            </th>
            @*
                Modificación de código INICIO - Título: Agregar campo nombre persona ausente - Creado: 30/03/2018 - Autor: Javier García <javier.garcia@kerocorp.com> - Kerocorp - Descripción: Se agrega el campo del nombre de la persona ausente
            *@
            <th style="border-right: 2px solid lightslategray; text-align:center">
                Nombre Empleado
            </th>
            <th style="border-right: 2px solid lightslategray; text-align:center">
                Días Ausencia
            </th>
            <th style="border-right: 2px solid lightslategray; text-align:center">
                Días Ausencia detalle
            </th>
            <th style="border-right: 2px solid lightslategray; text-align:center">
                Diagnóstico
            </th>
            <th style="border-right: 2px solid lightslategray; text-align:center">
                Tipo
            </th>
            <th style="border-right: 2px solid lightslategray; text-align:center">
                Fecha Inicio
            </th>
            <th style="border-right: 2px solid lightslategray; text-align:center">
                Fecha Fin
            </th>

        </tr>

        @foreach (var item in Model)
        {
            bool primerafila = true;
            foreach (var item1 in item.ListaAlertas)
            {
                DateTime fechai = item1.FechaInicio;
                string fechais = "";
                if (fechai!=null)
                {
                    fechais = fechai.ToShortDateString();
                }

                DateTime fechaf = item1.FechaFin;
                string fechafs = "";
                if (fechaf != null)
                {
                    fechafs = fechaf.ToShortDateString();
                }

                if (item.DiasAusencia <= 120)
                {
                    if (primerafila)
                    {
                        <tr>
                            <td rowspan="@item.ListaAlertas.Count" style="border-top: 1px solid lightslategray;border-right: 2px solid lightslategray; vertical-align:middle;text-align:center">
                                @Html.DisplayFor(modelItem => item.DocumentoPersona)
                            </td>
                            <td rowspan="@item.ListaAlertas.Count" style="border-top: 1px solid lightslategray;border-right: 2px solid lightslategray; vertical-align:middle;text-align:center">
                                @Html.DisplayFor(modelItem => item.NombrePersona)
                            </td>
                            <td rowspan="@item.ListaAlertas.Count" style="border-top: 1px solid lightslategray;border-right: 2px solid lightslategray; text-align:center; vertical-align:middle; color:#f1dd00">
                                @Html.DisplayFor(modelItem => item.DiasAusencia)
                            </td>
                            <td style="border-top: 1px solid lightslategray;border-right: 2px solid lightslategray; text-align:center; vertical-align:middle;">
                                @Html.DisplayFor(modelItem => item1.DiasAusencia)
                            </td>
                            <td style="border-top: 1px solid lightslategray;border-right: 2px solid lightslategray; text-align:center; vertical-align:middle;text-align:center">
                                @Html.DisplayFor(modelItem => item1.DiagnosticoDescripcion)
                            </td>
                            <td style="border-top: 1px solid lightslategray;border-right: 2px solid lightslategray; text-align:center; vertical-align:middle;text-align:center">
                                @Html.DisplayFor(modelItem => item1.Tipo)
                            </td>
                            <td style="border-top: 1px solid lightslategray;border-right: 2px solid lightslategray; text-align:center; vertical-align:middle;text-align:center">
                                @fechais
                            </td>
                            <td style="border-top: 1px solid lightslategray;border-right: 2px solid lightslategray; text-align:center; vertical-align:middle;text-align:center">
                                @fechafs
                            </td>
                        </tr>
                    }
                    else
                    {
                        <tr>
                            <td style="border-right: 2px solid lightslategray; text-align:center; vertical-align:middle;">
                                @Html.DisplayFor(modelItem => item1.DiasAusencia)
                            </td>
                            <td style="border-right: 2px solid lightslategray; text-align:center; vertical-align:middle;text-align:center">
                                @Html.DisplayFor(modelItem => item1.DiagnosticoDescripcion)
                            </td>
                            <td style="border-right: 2px solid lightslategray; text-align:center; vertical-align:middle;text-align:center">
                                @Html.DisplayFor(modelItem => item1.Tipo)
                            </td>
                            <td style="border-right: 2px solid lightslategray; text-align:center; vertical-align:middle;text-align:center">
                                @fechais
                            </td>
                            <td style="border-right: 2px solid lightslategray; text-align:center; vertical-align:middle;text-align:center">
                                @fechafs
                            </td>
                        </tr>
                    }

                    primerafila = false;
                }
                else
                {
                    if (primerafila)
                    {
                        <tr>
                            <td rowspan="@item.ListaAlertas.Count" style="border-top: 1px solid lightslategray;border-right: 2px solid lightslategray; vertical-align:middle;text-align:center">
                                @Html.DisplayFor(modelItem => item.DocumentoPersona)
                            </td>
                            <td rowspan="@item.ListaAlertas.Count" style="border-top: 1px solid lightslategray;border-right: 2px solid lightslategray; vertical-align:middle;text-align:center">
                                @Html.DisplayFor(modelItem => item.NombrePersona)
                            </td>
                            <td rowspan="@item.ListaAlertas.Count" style="border-top: 1px solid lightslategray;border-right: 2px solid lightslategray; text-align:center; vertical-align:middle; color:#fb5e5e">
                                @Html.DisplayFor(modelItem => item.DiasAusencia)
                            </td>
                            <td style="border-top: 1px solid lightslategray;border-right: 2px solid lightslategray; text-align:center; vertical-align:middle;">
                                @Html.DisplayFor(modelItem => item1.DiasAusencia)
                            </td>
                            <td style="border-top: 1px solid lightslategray;border-right: 2px solid lightslategray; text-align:center; vertical-align:middle;text-align:center">
                                @Html.DisplayFor(modelItem => item1.DiagnosticoDescripcion)
                            </td>
                            <td style="border-top: 1px solid lightslategray;border-right: 2px solid lightslategray; text-align:center; vertical-align:middle;text-align:center">
                                @Html.DisplayFor(modelItem => item1.Tipo)
                            </td>
                            <td style="border-top: 1px solid lightslategray;border-right: 2px solid lightslategray; text-align:center; vertical-align:middle;text-align:center">
                                @fechais
                            </td>
                            <td style="border-top: 1px solid lightslategray;border-right: 2px solid lightslategray; text-align:center; vertical-align:middle;text-align:center">
                                @fechafs
                            </td>
                        </tr>
                    }
                    else
                    {
                        <tr>
                            <td style="border-right: 2px solid lightslategray; text-align:center; vertical-align:middle;">
                                @Html.DisplayFor(modelItem => item1.DiasAusencia)
                            </td>
                            <td style="border-right: 2px solid lightslategray; text-align:center; vertical-align:middle;text-align:center">
                                @Html.DisplayFor(modelItem => item1.DiagnosticoDescripcion)
                            </td>
                            <td style="border-right: 2px solid lightslategray; text-align:center; vertical-align:middle;text-align:center">
                                @Html.DisplayFor(modelItem => item1.Tipo)
                            </td>
                            <td style="border-right: 2px solid lightslategray; text-align:center; vertical-align:middle;text-align:center">
                                @fechais
                            </td>
                            <td style="border-right: 2px solid lightslategray; text-align:center; vertical-align:middle;text-align:center">
                                @fechafs
                            </td>
                        </tr>
                    }

                    primerafila = false;
                }
            }

        }
        @*
            Modificación de código FIN
        *@
    </table>
